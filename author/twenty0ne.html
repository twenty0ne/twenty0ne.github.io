<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>twenty0ne's blog - twenty0ne</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">twenty0ne's blog </a></h1>
                <nav><ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/archives.html">Archives</a></li>
                    <li><a href="/tags.html">Tags</a></li>
                    <li><a href="/categories.html">Categories</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/posts/2015/10/how-to-design-game-config/">游戏配置如何更自由</a></h1>
<footer class="post-info">
        <span>四 22 十月 2015</span>
<span>| tags: <a href="/tag/game.html">game</a><a href="/tag/design.html">design</a></span>
</footer><!-- /.post-info --><p>印象中配置似乎是策划的事情，程序员将表格丢给策划后随便策划折腾。<br />
其实往往最痛苦的是在前期，策划的需求还没有确定，配置变来变去再正常不过，在这种情况下我不太建议开始设计表格，让策划来填写，最好的方式就是直接再程序里面写配置，比如TestConfig.h，这样修改起来更快捷更直观。  </p>
<p>那如何组织配置呢？我觉得这时候<strong>组合</strong>是更合理的方式。<br />
比如策划想在游戏中添加Item，可能需要用到如下属性</p>
<div class="highlight"><pre>            <span class="nt">struct</span> <span class="nt">Item</span> <span class="p">{</span>
                <span class="n">int</span>             <span class="n">uid</span><span class="p">;</span>
                <span class="n">std</span><span class="o">::</span><span class="n">string</span>     <span class="n">name</span><span class="p">;</span>
                <span class="n">int</span>             <span class="n">coin</span><span class="p">;</span>
            <span class="p">}</span><span class="o">;</span>
</pre></div>


<p>现在针对不同种类的物品，需要添加一些属性，可能等义就变为如下  </p>
<div class="highlight"><pre>            <span class="nt">struct</span> <span class="nt">Item</span> <span class="p">{</span>
                <span class="n">int</span>             <span class="n">uid</span><span class="p">;</span>
                <span class="n">std</span><span class="o">::</span><span class="n">string</span>     <span class="n">name</span><span class="p">;</span>
                <span class="n">int</span>             <span class="n">coin</span><span class="p">;</span>
                <span class="o">//...</span>
                <span class="n">int</span>             <span class="n">weight</span><span class="p">;</span>
                <span class="o">//...</span>
            <span class="p">}</span><span class="o">;</span>
</pre></div>


<p>好的过一段时间，你会发现配置表变为如下  </p>
<div class="highlight"><pre>            static Item gItemConfigs[] = {
                {0, &quot;item0&quot;, 1, ... , 10, ...},
                {1, &quot;item1&quot;, 2, ... , 10, ...},
                ...
            };
</pre></div>


<p>当需要修改，增减，将是一件特别痛苦的事情，这时候最好的方式就是<strong>拆分</strong>。  </p>
<div class="highlight"><pre>                struct Item {
                    // ...
                    int     type; // item type
                    int     uidprop; // item prop uid
                };
                struct ItemProp1 {
                    int     uidItem;    // 对应item uid
                    // ...
                };
                struct ItemProp2 {
                    int     uidItem;
                    // ...
                };
</pre></div>


<p>这样配置就变得清晰，便于编辑<br />
最后形成具体表格给策划使用的时候，就看策划喜欢那种方式，如果喜欢他全部item属性都放在一张里面，你就给他一张表包括所有属性，再在制作资源的时候通过<strong>脚本(或者其他方法)</strong>将配置表拆分成不同的表方便程序阅读<br />
如果策划喜欢将配置放在不同的表格里面，这种情况下需要确保的配置的uid对应正确，所以程序这边也需要做一些辅助脚本帮其检测更好。</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/posts/2015/10/how-to-improve-ccb-using/" rel="bookmark"
                           title="Permalink to ccb优化思考">ccb优化思考</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>三 14 十月 2015</span>
<span>| tags: <a href="/tag/cocos2d-x.html">cocos2d-x</a><a href="/tag/ccb.html">ccb</a><a href="/tag/ui.html">ui</a></span>
</footer><!-- /.post-info -->                <p>ccb载入过程中，如果有很多隐藏的元素，也会初始化，但是这样就必然造成内存和速度的缓慢，是否可以只在使用的时候才初始化</p>
                <a class="readmore" href="/posts/2015/10/how-to-improve-ccb-using/">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/posts/2015/09/is-mvc-good-for-game/" rel="bookmark"
                           title="Permalink to mvc是否适合游戏">mvc是否适合游戏</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>二 22 九月 2015</span>
<span>| tags: <a href="/tag/game.html">game</a><a href="/tag/mvc.html">mvc</a></span>
</footer><!-- /.post-info -->                <p>其实从开发游戏开始，就在一直找寻最好的结构。<br />
从最开始把逻辑显示都写到一块，再到逐渐分离成mvc，后来又选择性的去掉control，并没有明确到底什么类型的结构最适合游戏开发，但逐渐形成的意识就是mvc并不适合一般的游戏开发。
游戏开发中遇到的一些使用mvc的人，问他们选择mvc的原因，大部分回答都是将来移植，替换引擎方便之类的，虽然这的确是一个问题，但要考虑到这种概率有多小，如果把这种作为选择mvc的原因，我觉得是不能让人信服的。<br />
一般小游戏，比如贪吃蛇类型的，还是喜欢直接都写到一块，因为方便快捷。
如果是大一点的，建议将view单独出来，这样方便做逻辑和数据的处理，也方便在view上面做更多的表现，而不用考虑数据的影响。<br />
如果偏数据ui的游戏，比如《刀塔传奇》这种，建议采用mvc，因为model不仅与local有关，还与server有关系，mvc能够更好的协调数据的处理。</p>
                <a class="readmore" href="/posts/2015/09/is-mvc-good-for-game/">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/posts/2015/09/write-blog-with-pelican/" rel="bookmark"
                           title="Permalink to 使用pelican写blog">使用pelican写blog</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>日 13 九月 2015</span>
<span>| tags: <a href="/tag/pelican.html">pelican</a><a href="/tag/python.html">python</a></span>
</footer><!-- /.post-info -->                <p>1.使用makedown语法写文档<br />
2.切换到blog目录</p>
<div class="highlight"><pre>        $ make html
        $ ./develop_server.sh start
</pre></div>


<p>3.在浏览器中输入localhost:8000测试，停止请输入</p>
<div class="highlight"><pre>        $ ./develop_server.sh stop
</pre></div>


<p>4.将blog output</p>
<div class="highlight"><pre>        $ pelican content -o output -s pelicanconf.py
</pre></div>


<p>4.切换到git目录，输入如下</p>
<div class="highlight"><pre>        <span class="err">$</span> <span class="n">ghp</span><span class="o">-</span><span class="kn">import</span> <span class="p">{</span><span class="n">DIR</span><span class="o">-</span><span class="n">BLOG</span><span class="p">}</span><span class="o">/</span><span class="n">output</span> 
        <span class="err">$</span> <span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span><span class="p">:</span><span class="n">master</span>
</pre></div>


<p><strong>参考网址:</strong><br />
<a href="http://docs.getpelican.com/en/3.6.3/tips.html">http://docs.getpelican.com/en/3.6.3/tips ...</a></p>
                <a class="readmore" href="/posts/2015/09/write-blog-with-pelican/">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/posts/2015/09/my/" rel="bookmark"
                           title="Permalink to test2">test2</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>六 12 九月 2015</span>
<span>| tags: <a href="/tag/python.html">python</a></span>
</footer><!-- /.post-info -->                <p>test2</p>
                <a class="readmore" href="/posts/2015/09/my/">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>